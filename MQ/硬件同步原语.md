# 计算机同步原语

## CAS

```go

func transferCas(balance *int32, amount int, done chan bool) {
  for {
    old := atomic.LoadInt32(balance)
    new := old + int32(amount)
    if atomic.CompareAndSwapInt32(balance, old, new) {
      break
    }
  }
  done <- true
}

```

## FAA

```go

func transferFaa(balance *int32, amount int, done chan bool) {
  atomic.AddInt32(balance, int32(amount))
  done <- true
}

```
